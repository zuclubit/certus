{
  "ConnectionStrings": {
    "DefaultConnection": "",
    "Redis": "",
    "AzureSignalR": ""
  },
  "Azure": {
    "KeyVault": {
      "VaultUri": ""
    },
    "Storage": {
      "AccountName": "",
      "ContainerName": "validations"
    },
    "PostgreSql": {
      "Host": "",
      "Database": "certus",
      "Username": ""
    },
    "ApplicationInsights": {
      "ConnectionString": ""
    }
  },
  "Database": {
    "UseAzureTokenAuth": false,
    "EnableDetailedErrors": false,
    "SeedData": false,
    "EnableRetryOnFailure": true,
    "MaxRetryCount": 3,
    "CommandTimeout": 30
  },
  "Jwt": {
    "Issuer": "Certus",
    "Audience": "CertusApi",
    "AccessTokenExpirationMinutes": 60,
    "RefreshTokenExpirationDays": 7
  },
  "Cors": {
    "AllowedOrigins": []
  },
  "FileStorage": {
    "MaxFileSizeMB": 100,
    "AllowedExtensions": [ ".txt", ".csv", ".xlsx", ".xls" ]
  },
  "Validation": {
    "MaxRecordsPerFile": 1000000,
    "DefaultTimeoutSeconds": 300,
    "ParallelValidators": 4
  },
  "RateLimiting": {
    "GlobalPermitLimit": 100,
    "GlobalWindowMinutes": 1,
    "UploadTokenLimit": 10,
    "UploadReplenishmentMinutes": 1
  },
  "Serilog": {
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Warning",
        "Microsoft.Hosting.Lifetime": "Information",
        "Microsoft.EntityFrameworkCore": "Warning",
        "Microsoft.AspNetCore": "Warning",
        "System": "Warning"
      }
    },
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "outputTemplate": "[{Timestamp:HH:mm:ss} {Level:u3}] {Message:lj} {Properties:j}{NewLine}{Exception}"
        }
      }
    ],
    "Enrich": [ "FromLogContext", "WithMachineName", "WithEnvironmentName" ]
  },
  "HealthChecks": {
    "Enabled": true,
    "Path": "/health"
  },
  "ReferenceData": {
    "GleifApiUrl": "https://api.gleif.org/api/v1",
    "OpenFigiApiUrl": "https://api.openfigi.com/v3",
    "OpenFigiApiKey": "",
    "BanxicoSieApiUrl": "https://www.banxico.org.mx/SieAPIRest/service/v1",
    "BanxicoApiToken": "",
    "ValmerBaseUrl": "https://www.valmer.com.mx/VAL",
    "CacheExpirationMinutes": 60,
    "EnableCaching": true
  },
  "ExternalApis": {
    "Banxico": {
      "BaseUrl": "https://www.banxico.org.mx/SieAPIRest/service/v1",
      "Token": "",
      "ExchangeRateCacheMinutes": 60,
      "InterestRateCacheMinutes": 60,
      "UdiCacheMinutes": 1440,
      "MaxRetries": 3,
      "TimeoutSeconds": 30,
      "EnableRateLimitTracking": true,
      "DailyQueryLimit": 10000,
      "FiveMinuteQueryLimit": 200
    },
    "Valmer": {
      "BaseUrl": "https://www.valmer.com.mx",
      "PublicCsvUrl": "https://www.valmer.com.mx/VAL/descargas",
      "ApiUrl": "https://api.valmer.com.mx/v1",
      "ApiToken": "",
      "Username": "",
      "Password": "",
      "UsePublicEndpoint": true,
      "PriceVectorCacheMinutes": 60,
      "YieldCurveCacheMinutes": 60,
      "MaxRetries": 3,
      "TimeoutSeconds": 60
    },
    "OpenData": {
      "DatosGobMxUrl": "https://datos.gob.mx/busca/api/3",
      "DatosImssUrl": "https://datos.imss.gob.mx/api/3",
      "DatosConsarUrl": "https://datos.gob.mx/busca/api/3",
      "ApiKey": "",
      "MetadataCacheMinutes": 1440,
      "DataCacheMinutes": 60,
      "MaxRetries": 3,
      "TimeoutSeconds": 30,
      "MaxRecordsPerRequest": 1000
    },
    "Resilience": {
      "EnableRetry": true,
      "EnableCircuitBreaker": true,
      "CircuitBreakerFailureThreshold": 5,
      "CircuitBreakerDurationSeconds": 60,
      "EnableHedging": false,
      "HedgingDelayMs": 2000
    }
  },
  "AllowedHosts": "*"
}
